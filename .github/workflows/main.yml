name: SFDX Test Run on Push
on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: sfdx-actions/setup-sfdx@v1
        with:
          sfdx-auth-url: ${{ secrets.AUTH_SECRET }}
      - name: Checkout source code
        uses: actions/checkout@v4.1.1
        
      - name: 'Validating Source to org'
        run: |
            # following usage fir Demo only, "SFDX version" | "Displaying Org details" | "Displaying User details"
            echo "SFDX version"
            echo "-------------------------"
            sfdx -v
            echo "Displaying Org details..."
            echo "-------------------------"
            sfdx force:org:display

            # echo "Validating source to target org..."
            # echo "-------------------------"
            # no need to specify --targetusername
            sfdx force:source:deploy -p force-app/main/default -c
